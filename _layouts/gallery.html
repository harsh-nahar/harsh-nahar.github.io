---
layout: default
---

<div class="full-bg">
  <div class="container post-container">
    <div class="gallery-header">
      <a href="{{ '/gallery/' | relative_url }}" class="back-link">&lt; gallery</a>
      <button id="fontSwitch" class="font-switch">default</button>
    </div>

    <article class="post-content">
      <h1>{{ page.title }}</h1>

      {% if page.description %}
        <p class="desc">{{ page.description }}</p>
      {% endif %}

      <div class="content gallery-images" id="macy-container">
        {{ content }}
      </div>
    </article>

    <button id="shareBtn" class="share-btn">ðŸ”— share</button>
  </div>
</div>

<!-- ---------- Libraries ---------- -->
<!-- Macy (for masonry layout) -->
<script src="https://cdn.jsdelivr.net/npm/macy@2.5.1/dist/macy.min.js" integrity="sha384-vbLQF7G6CDg1IL9aClZVk7IXbQp7EfP7O/mu5yydqRAbhEyiV14akvjMAl9mTq3t" crossorigin="anonymous"></script>

<!-- LightGallery (for lightbox) -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.8.2/css/lightgallery-bundle.min.css">
<script src="https://cdn.jsdelivr.net/npm/lightgallery@2.8.2/lightgallery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lightgallery@2.8.2/plugins/zoom/lg-zoom.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lightgallery@2.8.2/plugins/thumbnail/lg-thumbnail.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  // Share button
  const shareBtn = document.getElementById("shareBtn");
  shareBtn.addEventListener("click", async () => {
    const url = window.location.href;
    if (navigator.share && /Mobi|Tablet|iPad|iPhone/.test(navigator.userAgent)) {
      navigator.share({ url });
    } else {
      await navigator.clipboard.writeText(url);
      shareBtn.textContent = "âœ”ï¸ copied";
      setTimeout(() => (shareBtn.textContent = "ðŸ”— share"), 2000);
    }
  });

  // Font toggle
  const fontBtn = document.getElementById("fontSwitch");
  fontBtn.addEventListener("click", () => {
    if (fontBtn.textContent === "default") {
      document.body.style.fontFamily = "sans-serif";
      fontBtn.textContent = "sans-serif";
    } else {
      document.body.style.fontFamily = "'Cormorant Garamond', serif";
      fontBtn.textContent = "default";
    }
  });

  // Wrap all <img> in anchor tags for LightGallery
  const imgs = document.querySelectorAll(".gallery-images img");
  imgs.forEach(img => {
    if (!img.closest("a")) {
      const wrapper = document.createElement("a");
      wrapper.href = img.src;
      img.parentNode.insertBefore(wrapper, img);
      wrapper.appendChild(img);
    }
  });

  // Initialize LightGallery
  lightGallery(document.querySelector(".gallery-images"), {
    selector: "a",
    zoom: true,
    thumbnail: true,
    download: false,
    backdropDuration: 300,
    closable: true,
  });

  // Initialize Macy (Masonry Grid)
  const macyInstance = Macy({
    container: "#macy-container",
    trueOrder: false,
    waitForImages: true,
    margin: 16,
    columns: 2,
    breakAt: {
      768: 1,
      1024: 2,
      1400: 3
    }
  });

  // Recalculate after all images load
  window.addEventListener("load", () => macyInstance.runOnImageLoad(() => macyInstance.recalculate(true), true));
});
</script>

<style>
.gallery-images img {
  width: 100%;
  height: auto;
  display: block;
  margin-bottom: 1rem;
  cursor: pointer;
  transition: transform 0.2s ease;
}
.gallery-images img:hover {
  transform: scale(1.02);
}

.desc {
  color: #555;
  margin-bottom: 1.5rem;
  font-size: 1rem;
  line-height: 1.6;
}

/* LightGallery backdrop fix for close-on-click */
.lg-backdrop {
  background: rgba(0,0,0,0.9);
}
</style>
