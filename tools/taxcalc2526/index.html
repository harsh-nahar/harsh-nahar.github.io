<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tax Calculator FY 2025–26</title>
  <link rel="stylesheet" href="/styles.css" />
  <style>
    /* Override font for tool */
    .tax-app, .tax-app * {
      font-family: Helvetica, Arial, sans-serif;
    }
    body {
      background: #f9fafb;
      margin: 0;
    }
    .tax-app {
      max-width: 600px;
      margin: 2rem auto;
      background: #fff;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 2px 20px rgba(0, 0, 0, 0.05);
    }
    .tax-app h1 {
      font-size: 22px;
      margin-bottom: 1rem;
      text-align: center;
      font-weight: 600;
    }
    .toggle-regime {
      display: flex;
      background: #eaeaea;
      border-radius: 6px;
      overflow: hidden;
      margin-bottom: 1.5rem;
    }
    .toggle-regime button {
      flex: 1;
      padding: 0.75rem;
      border: none;
      background: none;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .toggle-regime button.active {
      background: #000;
      color: #fff;
    }
    .field {
      margin-bottom: 1rem;
    }
    .field label {
      font-size: 14px;
      display: block;
      margin-bottom: 0.25rem;
    }
    .field input {
      width: calc(100% - 1rem);
      padding: 0.5rem;
      font-size: 16px;
      border: 1px solid #ddd;
      border-radius: 6px;
      box-sizing: border-box;
    }
    .actions {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
    }
    .actions button {
      flex: 1;
      padding: 0.75rem;
      font-size: 16px;
      font-weight: 500;
      border: none;
      border-radius: 6px;
      background: #000;
      color: #fff;
      cursor: pointer;
      transition: background 0.2s;
    }
    .actions button:hover {
      background: #ff5232;
    }
    .summary, .breakdown, .guide-popup {
      background: #f5f5f5;
      margin-top: 1.5rem;
      padding: 1rem;
      border-radius: 6px;
    }
    .summary div {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
      font-size: 14px;
    }
    .summary div.total {
      font-weight: 600;
      font-size: 16px;
    }
    .breakdown { display: none; }
    .breakdown table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }
    .breakdown th, .breakdown td {
      padding: 0.5rem;
      border-bottom: 1px solid #ddd;
      text-align: left;
    }
    .toggle-breakdown {
      margin-top: 1rem;
      background: none;
      border: none;
      color: #0073e6;
      cursor: pointer;
      font-size: 14px;
      text-decoration: underline;
    }
    .guide-popup {
      position: fixed;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      max-width: 90%; max-height: 80%;
      overflow-y: auto;
      display: none;
      z-index: 1000;
      background: #fff;
    }
    .guide-popup h2 {
      margin-top: 0;
      font-size: 18px;
    }
    .guide-popup .close {
      position: absolute;
      top: 0.5rem; right: 0.5rem;
      background: none;
      border: none;
      font-size: 18px;
      cursor: pointer;
    }
    .overlay {
      position: fixed;
      top:0;left:0;width:100%;height:100%;
      background: rgba(0,0,0,0.3);
      display: none;
      z-index: 900;
    }
    @media (max-width: 600px) {
      .tax-app { margin: 1rem; padding: 1rem; }
    }
  </style>
</head>
<body>
  <div class="container tax-app">
    <h1>Tax Calculator for FY 2025–26</h1>

    <!-- Regime toggle -->
    <div class="toggle-regime">
      <button id="newBtn" class="active">New Regime</button>
      <button id="oldBtn">Old Regime</button>
    </div>

    <div class="field">
      <label for="income">Your Annual Income (₹)</label>
      <input type="number" id="income" placeholder="Gross income before deductions" />
    </div>
    <div class="field" id="exemptionsField" style="display:none">
      <label for="exemptions">Exemptions (Old Regime)</label>
      <input type="number" id="exemptions" placeholder="₹0" />
    </div>

    <div class="actions">
      <button onclick="calculateTax()">Calculate</button>
      <button onclick="resetForm()">Reset</button>
    </div>

    <!-- Summary -->
    <div class="summary" id="summary" style="display:none">
      <div><span>Annual Income</span><span id="sumIncome"></span></div>
      <div><span>Standard Deduction</span><span id="sumDeduction"></span></div>
      <div><span>Taxable Income</span><span id="sumTaxable"></span></div>
      <div><span>Income Tax</span><span id="sumTax"></span></div>
      <div><span>Cess (4%)</span><span id="sumCess"></span></div>
      <div class="total"><span>Total Liability</span><span id="sumTotal"></span></div>
    </div>

    <button class="toggle-breakdown" onclick="toggleBreak()" style="display:none">Show Breakdown</button>

    <!-- Breakdown -->
    <div class="breakdown" id="breakdown">
      <table>
        <thead><tr><th>Slab</th><th>Amount</th><th>Rate</th><th>Tax</th></tr></thead>
        <tbody id="breakBody"></tbody>
      </table>
    </div>

    <button class="toggle-breakdown" onclick="openGuide()">Tax Calculation Guide</button>
  </div>

  <!-- Guide Popup -->
  <div class="overlay" onclick="closeGuide()"></div>
  <div class="guide-popup" id="guidePopup">
    <button class="close" onclick="closeGuide()">×</button>
    <h2>Tax Regime Explained</h2>
    <p><strong>New Regime:</strong> Reduced slab rates, no additional exemptions beyond ₹75,000 standard deduction. Income up to ₹12,00,000 exempt under section 87A.</p>
    <p><strong>Old Regime:</strong> Original slabs, allows user-specified exemptions (e.g., 80C). ₹75,000 deduction plus any exemptions.</p>
    <p><strong>Cess:</strong> An additional 4% on the calculated tax under both regimes.</p>
  </div>

  <script>
    const newBtn = document.getElementById('newBtn');
    const oldBtn = document.getElementById('oldBtn');
    const exemptionsField = document.getElementById('exemptionsField');
    const summary = document.getElementById('summary');
    const breakdown = document.getElementById('breakdown');
    const toggleBtn = document.querySelectorAll('.toggle-breakdown')[0];
    let currentRegime = 'new';

    newBtn.onclick = () => { currentRegime='new'; toggleReg(); };
    oldBtn.onclick = () => { currentRegime='old'; toggleReg(); };
    function toggleReg() {
      newBtn.classList.toggle('active', currentRegime==='new');
      oldBtn.classList.toggle('active', currentRegime==='old');
      exemptionsField.style.display = currentRegime==='old'?'block':'none';
      summary.style.display = 'none'; breakdown.style.display='none';
    }

    function calculateTax() {
      const income = parseFloat(document.getElementById('income').value);
      const exemptions = parseFloat(document.getElementById('exemptions').value||0);
      if (!income||income<0) return alert('Enter valid income');
      const deduction=75000;
      let taxable=income-deduction;
      if (currentRegime==='old') taxable-=exemptions;
      if (taxable<0) taxable=0;
      if (currentRegime==='new'&&income<=1200000) {
        alert('Exempt under 87A.'); summary.style.display='none';return;
      }
      const slabs=[400000,400000,400000,400000,400000,Infinity];
      const rates=[0.05,0.10,0.15,0.20,0.25,0.30];
      let rem=taxable, tax=0;
      const rows=[];
      for(let i=0;i<slabs.length;i++){
        const amt=Math.min(rem,slabs[i]);
        const t=amt*rates[i];
        if(amt>0) rows.push([i,amt,rates[i]*100,t]);
        tax+=t; rem-=amt; if(rem<=0) break;
      }
      const cess=tax*0.04, total=Math.round(tax+cess);
      document.getElementById('sumIncome').textContent='₹'+income.toLocaleString();
      document.getElementById('sumDeduction').textContent='-₹'+deduction.toLocaleString();
      document.getElementById('sumTaxable').textContent='₹'+taxable.toLocaleString();
      document.getElementById('sumTax').textContent='₹'+Math.round(tax).toLocaleString();
      document.getElementById('sumCess').textContent='₹'+Math.round(cess).toLocaleString();
      document.getElementById('sumTotal').textContent='₹'+total.toLocaleString();
      const body=''; let html='';
      rows.forEach(r=>{
        html+=`<tr><td>₹${(r[0]*4+0)}–₹${((r[0]+1)*4)}L</td><td>₹${r[1].toLocaleString()}</td><td>${r[2]}%</td><td>₹${Math.round(r[3]).toLocaleString()}</td></tr>`;
      });
      document.getElementById('breakBody').innerHTML=html;
      summary.style.display='block'; toggleBtn.style.display='inline'; breakdown.style.display='none';
    }
    function resetForm(){ document.getElementById('income').value='';document.getElementById('exemptions').value=''; summary.style.display='none';breakdown.style.display='none'; toggleBtn.style.display='none'; }
    function toggleBreak(){ breakdown.style.display= breakdown.style.display==='none'?'block':'none'; toggleBtn.textContent= breakdown.style.display==='none'?'Show Breakdown':'Hide Breakdown'; }
    function openGuide(){ document.querySelector('.overlay').style.display='block'; document.getElementById('guidePopup').style.display='block'; }
    function closeGuide(){ document.querySelector('.overlay').style.display='none'; document.getElementById('guidePopup').style.display='none'; }
    toggleReg();
  </script>
</body>
</html>
