---
layout: default
title: "reading log"
permalink: /reading/
description: "a chronological log of books and essays i have read."
image: "https://cdn.jsdelivr.net/gh/harsh-nahar/assets@main/blog-assets/dark_reading.webp"
---

<style>
    /* --- DASHBOARD --- */
    .stat-card {
        padding: 24px;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        background: #fff;
        margin-bottom: 40px;
    }
    .dark .stat-card { background: #1c1c1e; border-color: #333; }

    .stat-label { font-size: 0.75rem; text-transform: uppercase; color: #9ca3af; letter-spacing: 0.05em; margin-bottom: 4px; }
    .stat-val { font-family: 'JetBrains Mono', monospace; font-size: 1.5rem; font-weight: 700; color: #1d1d1f; }
    .dark .stat-val { color: #fff; }

    /* --- TABS --- */
    .tab-bar {
        display: flex;
        gap: 20px;
        border-bottom: 1px solid #e5e7eb;
        margin-bottom: 30px;
    }
    .dark .tab-bar { border-color: #333; }

    .tab-btn {
        padding-bottom: 10px;
        font-size: 0.9rem;
        font-weight: 500;
        color: #9ca3af;
        cursor: pointer;
        transition: color 0.2s;
        border-bottom: 2px solid transparent;
        margin-bottom: -1px;
    }
    .tab-btn.active { color: #1d1d1f; border-bottom-color: #1d1d1f; }
    .dark .tab-btn.active { color: #fff; border-bottom-color: #fff; }

    /* --- LISTS --- */
    .list-header {
        display: flex; justify-content: space-between; align-items: center;
        margin-bottom: 20px; font-size: 0.75rem; color: #9ca3af; text-transform: uppercase; letter-spacing: 0.05em;
    }

    .item-row {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        padding: 12px 0;
        border-bottom: 1px dashed #f3f4f6;
        transition: opacity 0.2s;
    }
    .dark .item-row { border-color: #27272a; }
    .item-row:hover { opacity: 0.7; }
    
    .item-left { display: flex; flex-direction: column; gap: 2px; max-width: 80%; }
    @media (min-width: 640px) {
        .item-left { flex-direction: row; align-items: baseline; gap: 8px; }
    }

    .item-title { font-weight: 600; color: #1d1d1f; text-decoration: none; font-size: 1rem; }
    .dark .item-title { color: #fff; }
    .item-author { font-size: 0.85rem; color: #6b7280; font-weight: 400; }

    .item-meta { font-family: 'JetBrains Mono', monospace; font-size: 0.75rem; color: #9ca3af; white-space: nowrap; }

    /* Monochrome Stars */
    .stars { letter-spacing: 2px; }
    .star-fill { color: #1d1d1f; }
    .star-empty { color: #e5e7eb; }
    .dark .star-fill { color: #fff; }
    .dark .star-empty { color: #333; }

    /* Controls */
    .sort-toggle { cursor: pointer; display: flex; align-items: center; gap: 4px; }
    .sort-toggle:hover { color: #1d1d1f; dark:color: #fff; }
</style>

<div class="fade-in max-w-3xl mx-auto mb-20">

    <div class="mb-10">
        <h1 class="text-3xl font-bold text-[#1d1d1f] dark:text-white mb-2">reading log</h1>
        <p class="text-sm text-gray-500 dark:text-gray-400">a chronological log of books and essays i have read.</p>
    </div>

    <!-- 1. STATS DASHBOARD -->
    <div class="stat-card">
        <div class="flex justify-between items-end">
            <div>
                <p class="stat-label">Total Volume</p>
                <div class="flex items-baseline gap-4">
                    <div><span class="stat-val">{{ site.data.books.size }}</span> <span class="text-xs text-gray-400">Books</span></div>
                    <div><span class="stat-val" id="totalPages">0</span> <span class="text-xs text-gray-400">Pages</span></div>
                </div>
            </div>
            <!-- Dynamic "Meters" Logic -->
            <div class="text-right hidden sm:block">
                <p class="stat-label">Tower Height</p>
                <div class="stat-val text-lg text-gray-500" id="towerHeight">0 m</div>
            </div>
        </div>
    </div>

    <!-- 2. TABS -->
    <div class="tab-bar">
        <div class="tab-btn active" onclick="switchTab('books')">Books</div>
        <div class="tab-btn" onclick="switchTab('essays')">Essays</div>
    </div>

    <!-- 3. BOOKS VIEW -->
    <div id="viewBooks">
        <div class="list-header">
            <span>Title / Author</span>
            <span class="sort-toggle" onclick="toggleSort()">
                <span id="sortLabel">Newest First</span> <i data-lucide="arrow-up-down" class="w-3 h-3"></i>
            </span>
        </div>

        <div id="bookListContainer">
            {% assign books = site.data.books | sort: 'date_read' | reverse %}
            {% for book in books %}
            <div class="item-row book-entry" 
                 data-date="{{ book.date_read }}" 
                 data-rating="{{ book.rating }}">
                
                <div class="item-left">
                    <a href="https://www.goodreads.com/book/show/{{ book.id }}" target="_blank" class="item-title hover:underline">
                        {{ book.title }}
                    </a>
                    <span class="item-author">by {{ book.author }}</span>
                </div>
                
                <div class="item-meta">
                    <span class="stars">
                        {% for i in (1..5) %}
                            {% if i <= book.rating %}
                                <span class="star-fill">●</span>
                            {% else %}
                                <span class="star-empty">○</span>
                            {% endif %}
                        {% endfor %}
                    </span>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- 4. ESSAYS VIEW -->
    <div id="viewEssays" class="hidden">
        <div class="list-header">
            <span>Title / Author</span>
            <span>Date</span>
        </div>

        {% assign articles = site.data.articles | sort: 'date' | reverse %}
        {% for article in articles %}
        <div class="item-row">
            <div class="item-left">
                <a href="{{ article.link }}" target="_blank" class="item-title hover:underline">
                    {{ article.title }}
                </a>
                <span class="item-author">{{ article.author }}</span>
            </div>
            <div class="item-meta">
                {{ article.date | date: "%Y" }}
            </div>
        </div>
        {% endfor %}
    </div>

</div>

<script>
    // --- STATS LOGIC ---
    // Liquid calculates count, JS calculates pages sum
    const books = {{ site.data.books | jsonify }};
    
    function initStats() {
        const pages = books.reduce((sum, b) => sum + (b.pages || 0), 0);
        document.getElementById('totalPages').textContent = pages.toLocaleString();
        
        // 1 meter = approx 10,000 pages (standard paper thickness)
        // actually avg book thickness 300 pages = 2cm. So 1 page = 0.006 cm.
        const meters = (pages * 0.006 / 100).toFixed(2);
        document.getElementById('towerHeight').textContent = `${meters} m`;
    }

    // --- TABS ---
    function switchTab(tab) {
        const booksDiv = document.getElementById('viewBooks');
        const essaysDiv = document.getElementById('viewEssays');
        const btns = document.querySelectorAll('.tab-btn');

        if(tab === 'books') {
            booksDiv.classList.remove('hidden');
            essaysDiv.classList.add('hidden');
            btns[0].classList.add('active');
            btns[1].classList.remove('active');
        } else {
            booksDiv.classList.add('hidden');
            essaysDiv.classList.remove('hidden');
            btns[1].classList.add('active');
            btns[0].classList.remove('active');
        }
    }

    // --- SORTING ---
    let sortMode = 'date'; // 'date' or 'rating'

    function toggleSort() {
        const container = document.getElementById('bookListContainer');
        const items = Array.from(container.getElementsByClassName('book-entry'));
        const label = document.getElementById('sortLabel');

        if(sortMode === 'date') {
            // Switch to Rating
            sortMode = 'rating';
            label.textContent = "Best Rated";
            items.sort((a, b) => b.getAttribute('data-rating') - a.getAttribute('data-rating'));
        } else {
            // Switch to Date
            sortMode = 'date';
            label.textContent = "Newest First";
            items.sort((a, b) => new Date(b.getAttribute('data-date')) - new Date(a.getAttribute('data-date')));
        }

        container.innerHTML = "";
        items.forEach(i => container.appendChild(i));
    }

    document.addEventListener('DOMContentLoaded', initStats);
    lucide.createIcons();
</script>