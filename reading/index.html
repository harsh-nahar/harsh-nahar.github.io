---
layout: default
title: "reading log"
permalink: /reading/
description: "a chronological log of what i read."
image: "https://cdn.jsdelivr.net/gh/harsh-nahar/assets@main/blog-assets/tools_page_snippet.webp"
---

<style>
    /* --- TABS --- */
    .tab-nav {
        display: flex;
        gap: 24px;
        border-bottom: 1px solid #e5e7eb;
        margin-bottom: 30px;
        margin-top: 20px;
    }
    .dark .tab-nav { border-color: #27272a; }

    .tab-btn {
        padding-bottom: 12px;
        font-size: 0.95rem;
        font-weight: 500;
        color: #9ca3af;
        cursor: pointer;
        border-bottom: 2px solid transparent;
        transition: all 0.2s;
        margin-bottom: -1px;
    }
    .tab-btn:hover { color: #1d1d1f; }
    .dark .tab-btn:hover { color: #fff; }

    .tab-btn.active {
        color: #1d1d1f;
        font-weight: 700;
        border-bottom-color: #1d1d1f;
    }
    .dark .tab-btn.active { color: #fff; border-bottom-color: #fff; }

    /* --- STATS BAR --- */
    .stat-bar {
        padding: 24px;
        border: 1px solid #e5e7eb;
        border-radius: 16px;
        background: #f9fafb;
        margin-bottom: 40px;
        display: flex;
        justify-content: space-around;
        align-items: center;
        text-align: center;
    }
    .dark .stat-bar { background: #1c1c1e; border-color: #333; }

    .stat-val { 
        font-family: 'JetBrains Mono', monospace; 
        font-size: 1.6rem; 
        font-weight: 700; 
        color: #1d1d1f; 
        line-height: 1;
        margin-bottom: 6px;
        transition: color 0.2s;
    }
    .dark .stat-val { color: #fff; }
    
    .stat-label { 
        font-size: 0.7rem; 
        text-transform: uppercase; 
        color: #6b7280; 
        letter-spacing: 0.05em; 
        font-weight: 600;
    }

    /* --- FILTERS --- */
    .filter-row {
        display: flex;
        gap: 8px;
        margin-bottom: 30px;
        flex-wrap: wrap;
    }
    .filter-chip {
        font-size: 0.75rem;
        padding: 6px 14px;
        border-radius: 99px;
        background: #fff;
        border: 1px solid #e5e7eb;
        color: #6b7280;
        cursor: pointer;
        transition: all 0.2s;
        font-weight: 500;
    }
    .dark .filter-chip { background: #000; border-color: #333; color: #9ca3af; }
    
    .filter-chip:hover { border-color: #9ca3af; color: #1d1d1f; }
    .dark .filter-chip:hover { color: #fff; border-color: #666; }

    .filter-chip.active {
        background: #1d1d1f; color: #fff; border-color: #1d1d1f;
    }
    .dark .filter-chip.active { background: #fff; color: #000; border-color: #fff; }

    /* --- YEAR COLLAPSIBLE --- */
    details.year-group { margin-bottom: 24px; }
    
    summary.year-summary {
        list-style: none;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        padding-bottom: 12px;
        border-bottom: 1px solid #e5e7eb;
        margin-bottom: 16px;
        transition: border-color 0.2s;
    }
    .dark summary.year-summary { border-color: #27272a; }
    summary.year-summary::-webkit-details-marker { display: none; }

    summary.year-summary:hover { border-bottom-color: #9ca3af; }

    .year-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: #e5e7eb;
        transition: color 0.2s;
    }
    .dark .year-title { color: #333; }
    
    /* Open State */
    details[open] summary .year-title { color: #1d1d1f; }
    .dark details[open] summary .year-title { color: #fff; }

    .year-meta {
        display: flex;
        align-items: center;
        gap: 12px;
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.8rem;
        color: #9ca3af;
    }

    .year-arrow {
        font-size: 0.8rem;
        transition: transform 0.2s;
    }
    details[open] .year-arrow { transform: rotate(180deg); }


    /* --- BOOK LIST ITEMS --- */
    .book-row {
        padding: 16px 0;
        border-bottom: 1px dashed #f3f4f6;
    }
    .dark .book-row { border-color: #27272a; }
    .book-row:last-child { border-bottom: none; }
    .book-row.hidden { display: none; }

    .b-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: 16px;
    }

    .b-info {
        flex-grow: 1;
        padding-right: 10px;
    }

    .b-title {
        font-weight: 600;
        color: #1d1d1f;
        text-decoration: none;
        font-size: 1rem;
        line-height: 1.4;
    }
    .dark .b-title { color: #fff; }
    .b-title:hover { color: #3b82f6; }

    .b-author {
        font-size: 0.85rem;
        color: #6b7280;
        margin-left: 6px;
        white-space: nowrap;
    }

    /* Fixed width rating to prevent wrapping */
    .rating-dots { 
        font-size: 0.75rem; 
        letter-spacing: 2px;
        color: #1d1d1f;
        flex-shrink: 0;
        margin-top: 3px;
        white-space: nowrap;
    }
    .dark .rating-dots { color: #fff; }
    
    .rating-dots .empty { color: #e5e7eb; }
    .dark .rating-dots .empty { color: #333; }

    .b-review {
        font-family: 'Georgia', serif;
        font-style: italic;
        color: #4b5563;
        font-size: 0.95rem;
        margin-top: 8px;
        padding-left: 12px;
        border-left: 2px solid #e5e7eb;
        line-height: 1.6;
    }
    .dark .b-review { color: #9ca3af; border-color: #333; }

    /* --- ESSAYS --- */
    .article-item {
        padding: 16px 0;
        border-bottom: 1px solid #f3f4f6;
    }
    .dark .article-item { border-color: #27272a; }
    
    .article-link {
        font-size: 1rem;
        font-weight: 500;
        color: #1d1d1f;
        text-decoration: none;
        display: block;
        margin-bottom: 4px;
    }
    .dark .article-link { color: #fff; }
    .article-link:hover { color: #3b82f6; text-decoration: underline; }
    
    .article-meta { 
        font-size: 0.8rem; 
        color: #9ca3af; 
    }
    
    .hidden { display: none !important; }
</style>

<div class="fade-in max-w-3xl mx-auto mb-20">

    <div class="mb-8">
        <h1 class="text-3xl font-bold text-[#1d1d1f] dark:text-white mb-2">reading log</h1>
        <p class="text-sm text-gray-500 dark:text-gray-400">
            a chronological log of what i read.
        </p>
    </div>

    <!-- TABS -->
    <div class="tab-nav">
        <div class="tab-btn active" onclick="switchTab('books')" id="tabBooksBtn">Books</div>
        <div class="tab-btn" onclick="switchTab('essays')" id="tabEssaysBtn">Essays</div>
    </div>

    <!-- === BOOK TAB === -->
    <div id="tabBooksContent">
        
        <!-- Stats (Books Only) -->
        <div class="stat-bar">
            <div>
                <div id="totalBooks" class="stat-val">0</div>
                <p class="stat-label">Books Read</p>
            </div>
            <div>
                <div id="totalPages" class="stat-val">0</div>
                <p class="stat-label">Pages Turned</p>
            </div>
        </div>

        <!-- Filters -->
        <div class="filter-row">
            <div class="filter-chip active" onclick="filterRating('all', this)">All</div>
            <div class="filter-chip" onclick="filterRating(5, this)">5 Stars</div>
            <div class="filter-chip" onclick="filterRating(4, this)">4 Stars</div>
            <div class="filter-chip" onclick="filterRating(3, this)">3 Stars</div>
        </div>

        <!-- Book List (Grouped by Year) -->
        <div id="bookListContainer">
            {% comment %}
                Group books by 'year'.
                Sort descending (2025 at top).
            {% endcomment %}
            {% assign books_by_year = site.data.books | group_by: "year" | sort: "name" | reverse %}
            {% assign current_year_str = "now" | date: "%Y" %}

            {% for year_group in books_by_year %}
            
            <!-- Default Open ONLY for Current Year -->
            <details {% if year_group.name == current_year_str %}open{% endif %} class="year-group">
                <summary class="year-summary">
                    <span class="year-title">{{ year_group.name }}</span>
                    <div class="year-meta">
                        <!-- ID for dynamic update via JS -->
                        <span class="year-count-label" id="count-{{ year_group.name }}">{{ year_group.items | size }} Books</span>
                        <span class="year-arrow">▼</span>
                    </div>
                </summary>
                
                <div class="year-items">
                {% for book in year_group.items %}
                    <div class="book-row" data-rating="{{ book.rating | round }}" data-pages="{{ book.pages }}">
                        <div class="b-header">
                            <div class="b-info">
                                <a href="https://www.goodreads.com/book/show/{{ book.id }}" target="_blank" class="b-title">
                                    {{ book.title }}
                                </a>
                                <span class="b-author">by {{ book.author }}</span>
                            </div>
                            
                            <!-- Rating -->
                            <div class="rating-dots" title="{{ book.rating }}/5">
                                {% for i in (1..5) %}
                                    {% if i <= book.rating %}●{% else %}<span class="empty">●</span>{% endif %}
                                {% endfor %}
                            </div>
                        </div>

                        {% if book.review %}
                            <p class="b-review">“{{ book.review }}”</p>
                        {% endif %}
                    </div>
                {% endfor %}
                </div>
            </details>
            {% endfor %}
        </div>
    </div>

    <!-- === ESSAYS TAB === -->
    <div id="tabEssaysContent" class="hidden">
        <div class="article-list">
            {% assign articles = site.data.articles | sort: 'date' | reverse %}
            {% for article in articles %}
            <div class="article-item">
                <a href="{{ article.link }}" target="_blank" class="article-link">{{ article.title }}</a>
                <div class="article-meta">
                    {{ article.author }} <span class="mx-1">•</span> {{ article.date | date: "%Y" }}
                </div>
            </div>
            {% endfor %}
            
            {% if articles.size == 0 %}
                <p class="text-center text-gray-400 py-10">No essays logged yet.</p>
            {% endif %}
        </div>
    </div>

</div>

<!-- LOGIC -->
<script>
    // 1. Initial Stats Calculation (Liquid injected)
    const booksData = {{ site.data.books | jsonify }};
    updateGlobalStats(booksData.length, booksData.reduce((s, b) => s + (b.pages || 0), 0));

    function updateGlobalStats(count, pages) {
        document.getElementById('totalBooks').textContent = count;
        document.getElementById('totalPages').textContent = pages.toLocaleString();
    }

    // 2. Tab Switcher
    function switchTab(tab) {
        const booksContent = document.getElementById('tabBooksContent');
        const essaysContent = document.getElementById('tabEssaysContent');
        const booksBtn = document.getElementById('tabBooksBtn');
        const essaysBtn = document.getElementById('tabEssaysBtn');

        if(tab === 'books') {
            booksContent.classList.remove('hidden');
            essaysContent.classList.add('hidden');
            booksBtn.classList.add('active');
            essaysBtn.classList.remove('active');
        } else {
            booksContent.classList.add('hidden');
            essaysContent.classList.remove('hidden');
            essaysBtn.classList.add('active');
            booksBtn.classList.remove('active');
        }
    }

    // 3. Dynamic Filter Logic
    function filterRating(rating, btn) {
        // Toggle Active Chip
        document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
        btn.classList.add('active');

        const years = document.querySelectorAll('.year-group');
        let globalVisibleCount = 0;
        let globalPagesCount = 0;

        years.forEach(yearGroup => {
            const rows = yearGroup.querySelectorAll('.book-row');
            let yearVisibleCount = 0;

            rows.forEach(row => {
                const r = parseInt(row.getAttribute('data-rating'));
                const p = parseInt(row.getAttribute('data-pages')) || 0;
                
                if(rating === 'all' || r === rating) {
                    row.classList.remove('hidden');
                    yearVisibleCount++;
                    globalPagesCount += p;
                } else {
                    row.classList.add('hidden');
                }
            });

            // Update Year Header Count
            const countLabel = yearGroup.querySelector('.year-count-label');
            if(countLabel) countLabel.textContent = `${yearVisibleCount} Books`;

            // Hide Empty Years
            if(yearVisibleCount === 0) yearGroup.style.display = 'none';
            else yearGroup.style.display = 'block';

            globalVisibleCount += yearVisibleCount;
        });

        // Update Global Stats based on Filter
        updateGlobalStats(globalVisibleCount, globalPagesCount);
    }
</script>